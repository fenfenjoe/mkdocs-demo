# 性能测试 


### 性能测试的对象

* 测试某个功能的性能
* 测试某个接口的性能（一个功能可能需要调用多个接口）

### 性能指标

* 并发用户数
* 响应时间
* QPS/TPS（并发数/响应时间）
* 吞吐量（一般算日吞吐量/月吞吐量，用QPS计算）
* 成功率
* 失败率
* CPU
* 内存
* I/O
* 带宽

> 简单理解：  
> 1.性能测试时，要测试出在不同并发数下，系统的平均响应时间，进而得出系统在不同并发数下的qps/tps
> 2.qps/tps便可代表系统的吞吐能力


### 如何做性能测试

1. 负载测试阶段：从0开始，不断增加负载，此时吞吐量也会不断增大；当负载增加到一定值，吞吐量会出现一个峰值，此时的负载被成为瓶颈负载。
2. 稳定性测试阶段：让系统在瓶颈负载下继续运行，看其稳定性（通常用响应时间、成功率判断）
3. 压力测试阶段：让系统从瓶颈负载开始，继续不断增加负载，查看系统在超负荷状态下运行的性能指标（吞吐量、成功率、响应时间）


|并发数（线程数、负载）|平均响应时间(毫秒)  |qps  |备注                       |
|---                 |---               |---  |---                         |
| 10                 |100ms             | 100 |负载测试阶段                |
| 20                 |100ms             | 200 |-                           |
| 50                 |125ms             | 400 |-                           |
| 100                |200ms             | 500 |达到吞吐量峰值，进入稳定性测试阶段|
| 120                |218ms             | 550 |吞吐量开始变弱，进入压力测试阶段|
| 140                |280ms             | 500 |-                           |

> 在软件性能测试中，“负载”一般是指线程数；而吞吐量则指qps或者tps。  


### 性能测试常用工具

* JMeter
* Sysbench
* loadrunner


### 性能测试报告  

压测工具：  
压测主机配置：  

| 压测接口 | 协议 | 方法 | 并发数 | 总请求数 | 吞吐率 | 响应时间 | 错误率 | CPU使用率 | 内存使用率 |
| ---|---|---|---|---|---|---|---|---|---|
||||||||||



### 压测实战

参考：

1. [如何使用Jmeter进行压力测试？这篇入门讲解请拿走！](https://developer.kingdee.com/article/302362505672493824?productLineId=29&isKnowledge=2)

2. [JMeter基础系列--组件介绍](https://vip.kingdee.com/article/302031843623599616?productLineId=29&isKnowledge=2)