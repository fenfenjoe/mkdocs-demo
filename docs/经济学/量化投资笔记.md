# 量化投资

### 什么是量化投资？

借助**数学模型、计算机技术**，从庞大的**历史数据**中选出能带来超额收益的多种**“大概率”事件**以制定策略。

>  量化这一工具的原理，简单地说就是：  
>  可能盈利的想法 -> 具体的策略 -> 具体的代码 -> 计算机执行代码以检验策略效果 -> 调整策略 -> 调整代码 ...

### 量化投资有什么用？

1. 可以将你的“可能盈利的想法”转换为具体的“策略”
  当你觉得自己找到了盈利的规律，但不够具体清晰，此时就可以借助“量化”这一工具，将你的想法转换为**策略**    
2. 可以验证你的策略是否有效 
  利用量化投资的**回测**和**模拟交易**工具，可以检验你的策略是否真的能够盈利  

### 回测和模拟交易

**回测**：利用历史交易数据（例如2006~2016年），由计算机执行策略去做买入、卖出操作，并根据最终的收益率去验证策略的有效性   
**模拟交易**：利用实盘数据（例如明天开始~3个月后），由计算机执行策略去做买入、卖出操作，并根据最终的收益率去验证策略的有效性  


### 准备工作

在进行量化交易入门之前，建议先补充以下知识：
* 证券交易的基础知识
* 什么是K线图
* 如何看懂财务报表

#### 如何入门

可以按照以下流程进行入门：

1. 聚宽量化平台：零基础量化交易入门[https://www.joinquant.com/view/community/detail/8ec7aaaa899cf928550f89a104637f22](https://www.joinquant.com/view/community/detail/8ec7aaaa899cf928550f89a104637f22)

> 通过该教程你可以掌握：
> * 了解量化交易的基本概念
> * 了解量化交易的基本框架（编写策略、回测）
> * 了解python的基本语法
> * 了解聚宽提供的API用法（如何查询股票信息、如何买入、卖出股票）
> * 如何将自己的交易想法转变为代码形式的量化策略
> * 如何通过回测、模拟交易检验策略

2. 聚宽量化平台：多因子基础及流程学习[https://www.joinquant.com/view/community/detail/ae7a9d66145d20732146caef58e4fc95?type=1](https://www.joinquant.com/view/community/detail/ae7a9d66145d20732146caef58e4fc95?type=1)

> 至此，便会发现需要补充金融、数学方面的知识：
> * 经济学
>   * 金融经济学
>     * 资产定价理论为核心
>   * 计量经济学
> * 数学
>   * 数学分析
>   * 线性代数
>   * 概率论
>   * 数理统计
>   * 时间序列分析


#### 有哪些常见的量化投资模型？

* 现代投资组合理论MPT
* 资本资产定价模型CAPM
* 套利定价理论APT
* Fama_French三因子模型
* 多因子模型

* CTA模型（期货模型）

  


### FAQ

什么是P quant，Q quant？



相关证书：

CQF（国际量化金融分析师）、MFE















### 量化分析实战

#### 编程环境介绍

Python：编程语言

Jupyter：编程工具、IDE

Pandas：python的数据分析包，提供了丰富的函数和类



#### 编程环境搭建

1. 安装python3
2. 安装Jupyter





#### Jupyter（数据分析IDE）

常用快捷键

* 运行本单元的代码：ctrl + enter

* 运行本单元的代码，选中下个单元：shift + enter
* 运行本单元的代码，插入一个新单元：alt + enter
* 查看函数参数：shift+tab



常见语法

```python
# 查看表valuation的介绍：输入 valuation? 然后运行（ctrl+enter）
# 查看表income的介绍：输入 income? 然后运行（ctrl+enter）
# 查看表valuation中字段的介绍：输入 valuation.pe_ratio? 然后运行（ctrl+enter）
```



常见函数

​	参考API





#### Pandas（数据分析框架）

**1.dataframe（表、二维数组）**

跟数据库表类似，由行跟列组成；

一行又被称为一个Series。有一个固定属性：id，还有其他列属性；其他列属性可以理解为：Series中对某个数据的一个标签；

API如下：

```python
import pandas as pd
'''
一.创建DataFrame对象：pd.DataFrame(data , index , columns , dtype , copy)
'''

#创建空df
df = pd.DataFrame()

#创建单一列表df
data = [1,2,3,4]
df = pd.DataFrame(data)
print(df)
'''
表结构如下：
1
2
3
4
'''

#创建二维表df
#方法1：（按行插入，无列标签）
data = [['alex',20],['nick',18],['tommy',19]]
#方法2：（按列插入，带列标签）
data = {'Name':['alex','nick','tommy'],'Age':[20,18,19]}
#方法3：（按行插入，带列标签）
data = [{'Name':'alex','Age':20},{'Name':'nick','Age':18},{'Name':'tommy','Age':19}]

df = pd.DataFrame(data)
print(df)

'''
输出如下：（默认的行标签，由0开始，通过range(n)生成）
  Name Age
0 alex 20
1 nick 18
2 tommy 19
'''



#创建二维表df，并指定列标签的名字，指定数值元素的数据类型为float
data = [['alex',20],['nick',18],['tommy',19]]
df = pd.DataFrame(data , columns=['Name','Age'] , dtype=float)
print(df)
'''
输出如下：
  Name Age
0 alex 20.0
1 nick 18.0
2 tommy 19.0
'''


#创建二维表df，自定义行标签
data = {'Name':['alex','nick','tommy'],'Age':[20,18,19]}
df = pd.DataFrame(data , index= ['rank1','rank2','rank3'])
'''
输出如下：
		Name Age
rank1	alex 20.0
rank2	nick 18.0
rank3	tommy 19.0
'''

```



```python
import pandas as pd
'''
二.DataFrame列索引操作
'''

#选取数据列
data = {'Name':['alex','nick','tommy'],'Age':[20,18]}
df = pd.DataFrame(data)
print(df['Age'])
'''
输出如下：
0 20
1 18
2 NaN (未录入所以为空值：NaN)
Name: Age, dtype: int
'''


#添加新的数据列
data = {'Name':['alex','nick','tommy'],'Age':[20,18,19]}
df = pd.DataFrame(data)
df['语文成绩'] = pd.Series([80,90,95])
df['数学成绩'] = pd.Series([80,90,95])
df['英语成绩'] = pd.Series([80,90,95])
#数据列运算
df['总成绩'] = df['语文成绩'] + df['数学成绩'] + df['英语成绩']

#删除数据列
data = {'Name':['alex','nick','tommy'],'Age':[20,18,19]}
df = pd.DataFrame(data)
#方法1：del
del df['Age']
#方法2：pop()
df.pop('Name')



```

```python
import pandas as pd
'''
三.DataFrame行索引操作
'''

#插入一行数据
data = {'Name':['alex','nick'],'Age':[20,18]}
df = pd.DataFrame(data)
data2 = {'Name':['tommy'],'Age':[19]}
df2 = pd.DataFrame(data)
df.append(df2)

#删除第一行数据
df.drop(0)

#通过索引查询
data = {'Name':['alex','nick','tommy'],'Age':[20,18,19]}
df = pd.DataFrame(data)
print(df.iloc[0]) #打印第一行数据
print(df.iloc[0:2]) #打印第1、2行数据

#通过行标签查询
data = {'Name':['alex','nick','tommy'],'Age':[20,18,19],index=['first','second','third']}
df = pd.DataFrame(data)
print(df.loc['first']) #打印first行数据
```



```python
import pandas as pd
'''
四.DataFrame其他操作
'''
data = {'Name':['alex','nick','tommy'],'Age':[20,18,19]}
df = pd.DataFrame(data,index=['first','second','third'])

#倒置（行变成列，列变成行）
df.T
#返回每列的数据类型
df.dtypes
#判断df是否为空，返回true或false
df.empty
#返回一个元组(x,y)，x为df的行数，y为列数
df.shape
#返回df的元素数量，即行数*列数-NaN值
df.size
#以二维数组形式（ndarray）返回
df.values
'''
[
['alex',20],
['nick',18],
['tommy',19]
]
'''
#查看前n条数据
df.head(n)
#查看末尾的n条数据
df.tail(n)
```



**2.series**